# Booj 在线编程平台

这是基于Vue3+Spring Boot+Spring Cloud微服务 + Docker的 **在线编程平台**（简称OJ）

在系统前端，管理员可以创建、管理题目；用户可以自由搜索题目、阅读题目、编写并提交代码。 在系统后端，能够根据管理员设定的题目测试用例在代码沙箱中对代码进行编译、运行、判断输出是否正确。 其中，代码沙箱可以作为独立服务，提供给其他开发者使用。

代码沙箱：https://github.com/Rechiard/code-sandbox

改造的微服务版本：https://github.com/Rechiard/Booj-Cloud

### 技术选型

前端：

- Vue3
- VueX状态管理
- Arco Design组件库
- OpenApi前端带阿米生成器

后端：

- Java Spring Cloud + Spring Cloud Alibaba微服务
    - Nacos注册中心
    - OpenFeign客户端调用
    - GateWay网关
    - 聚合接口文档（knife4j）
- Java Spring Boot
- Java进程控制
    - Java安全管理器
    - Docker代码沙箱实现（https://github.com/Rechiard/code-sandbox）
    - 虚拟机+远程开发
- MyBatis-Plus、MySQL数据库
- Redis分布式Session
- RabbitMQ消息队列
- **多种设计模式**
    - 工厂模式（解决不同代码沙箱对象的按需创建）
    - 代理模式（对方法进行日志增强）
    - 策略模式（解决不同语言的特殊处理方法）
    - 模板方法模式（解决不同代码沙箱的特定流程的不同）

### 项目架构：

![image-20240628203025742](imgs\image-20240628203025742.png)

### 项目的基本功能：

1. 用户模块
    - 注册
    - 登录
2. 题目模块
    1. 管理员
        - 创建题目
        - 删除题目
        - 修改题目
    2. 用户
        - 搜索题目
        - 在线做题
        - 提交题目代码
3. 判题模块
    - 提交判题（结果正确性）
    - 错误处理（例如内存溢出、安全性、超时等）
    - 自主实现代码沙箱（安全沙箱，用于执行用户的代码并返回结果）
    - 开放接口（提供一个独立的新服务类似SDK）

### 核心业务流程：

![image-20240628202941636](imgs\image-20240628202941636.png)

![image-20240628202937279](imgs\image-20240628202937279.png)


### 项目展示：

登录页面：

![image-20240628204816283](imgs\image-20240628204816283.png)

题目浏览主页：

![image-20240628204649080](imgs\image-20240628204649080.png)

做题页面：

![image-20240628204943570](imgs\image-20240628204943570.png)



题目提交页面：

![image-20240628204951617](imgs\image-20240628204951617.png)

管理题目页面：

![image-20240628204921725](imgs\image-20240628204921725.png)

创新（更新）题目页面：

![image-20240628204854508](imgs\image-20240628204854508.png)

![image-20240628204849447](imgs\image-20240628204849447.png)

### 收获：

- 将单体项目改造成微服务项目
- 保证用户执行代码的安全（Java安全管理器，Docker隔离运行环境）
- 使用消息队列解耦程序（将题目提交与判题分别放入生产者与消费者）
- 巧妙的利用设计模式优化代码（工厂模式、代理模式、策略模式、模板模式）
- 利用Java程序操作Docker隔离程序并运行Docker（DockerClient）
- 学会怎么远程开发（利用idea的ssh开发模式）
- 学会了一些少见bug的解决办法（sessionId问题，循环依赖问题等等）